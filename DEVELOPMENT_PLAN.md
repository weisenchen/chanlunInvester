# ç¼ è®ºæ™ºèƒ½åˆ†æç³»ç»Ÿ - å®Œæ•´å¼€å‘è®¡åˆ’
# ChanLun AI Trading System - Comprehensive Development Plan

**ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºæ—¶é—´ï¼š** 2026-02-28  
**åŸºäºï¼š** ç¼ ä¸­è¯´ç¦… æ•™ä½ ç‚’è‚¡ç¥¨ 1-108 è¯¾å®Œæ•´ç‰ˆ  
**æ¶æ„å‚è€ƒï¼š** ChanLun Invester v2.0 (LEAN-Inspired)  
**æŠ€æœ¯æ ˆï¼š** Rust + Python æ··åˆæ¶æ„ï¼ŒDocker éƒ¨ç½²

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦ (Executive Summary)

### é¡¹ç›®æ„¿æ™¯
æ„å»ºç¼ è®ºé¢†åŸŸçš„äº‹å®æ ‡å‡† â€”â€” ç®€æ´ã€ä¸“ä¸šã€æ˜“ç”¨çš„æ™ºèƒ½åˆ†æç³»ç»Ÿï¼Œå®ç° 1-2 å¤©ä¸Šæ‰‹ï¼Œ<5 åˆ†é’Ÿå®‰è£…ï¼Œ<5 ç§’å¯åŠ¨ã€‚

### æ ¸å¿ƒç‰¹æ€§
| ç‰¹æ€§ | å®ç°æ–¹å¼ |
|------|----------|
| ğŸ¦€ é«˜æ€§èƒ½æ ¸å¿ƒ | Rust å®ç°åˆ†å‹ã€ç¬”ã€çº¿æ®µã€ä¸­æ¢è®¡ç®— |
| ğŸ çµæ´»é›†æˆ | Python å®ç°ç­–ç•¥ã€åˆ†æã€CLI |
| ğŸ”„ è‡ªåŠ¨æ•…éšœåˆ‡æ¢ | Rust ä¸»å¼•æ“ + Python å¤‡ä»½å¼•æ“ |
| ğŸ¯ ç²¾ç¡®ä¹°å–ç‚¹ | ä¸‰ç±»ä¹°å–ç‚¹è‡ªåŠ¨è¯†åˆ« + åŒºé—´å¥—å®šä½ |
| ğŸ“Š å¤šå‘¨æœŸåˆ†æ | 1 åˆ†é’Ÿ â†’ æœˆçº¿ å…¨çº§åˆ«æ”¯æŒ |
| ğŸ³ ä¸€é”®éƒ¨ç½² | Docker é•œåƒ <500MB |
| ğŸ“š 10 ä¸ªæ¸è¿›ç¤ºä¾‹ | ä»åˆ†å‹è¯†åˆ«åˆ°å¤šçº§åˆ«è”ç«‹ |

### å¼€å‘å‘¨æœŸï¼š**10 å‘¨** (Phase 1-4)

---

## ğŸ—ï¸ ä¸€ã€ç³»ç»Ÿæ¶æ„è®¾è®¡

### 1.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ChanLun Trading System                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Rust Engine     â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚  Python Engine   â”‚          â”‚
â”‚  â”‚  (Primary)       â”‚ Health  â”‚  (Backup)        â”‚          â”‚
â”‚  â”‚  Port: 50051     â”‚ Check   â”‚  Port: 50052     â”‚          â”‚
â”‚  â”‚                  â”‚         â”‚                  â”‚          â”‚
â”‚  â”‚  â€¢ Fractal       â”‚         â”‚  â€¢ Fractal       â”‚          â”‚
â”‚  â”‚  â€¢ Stroke (ç¬”)   â”‚         â”‚  â€¢ Stroke        â”‚          â”‚
â”‚  â”‚  â€¢ Segment       â”‚         â”‚  â€¢ Segment       â”‚          â”‚
â”‚  â”‚  â€¢ Center        â”‚         â”‚  â€¢ Center        â”‚          â”‚
â”‚  â”‚  â€¢ Divergence    â”‚         â”‚  â€¢ Divergence    â”‚          â”‚
â”‚  â”‚  â€¢ BSP (ä¹°å–ç‚¹)  â”‚         â”‚  â€¢ BSP           â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                              â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                      â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚  Failover Coordinator â”‚                          â”‚
â”‚           â”‚  (Auto-switch logic)  â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                      â”‚                                       â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚   CLI / gRPC API     â”‚                          â”‚
â”‚           â”‚   (User Interface)   â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ç›®å½•ç»“æ„

```
chanlun-system/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ DEVELOPMENT_PLAN.md          # æœ¬å¼€å‘è®¡åˆ’
â”œâ”€â”€ pyproject.toml              # Python é¡¹ç›®é…ç½®
â”œâ”€â”€ Cargo.toml                  # Rust workspace é…ç½®
â”œâ”€â”€ docker-compose.yml          # Docker éƒ¨ç½²
â”œâ”€â”€ docker-compose.prod.yml     # ç”Ÿäº§éƒ¨ç½²
â”œâ”€â”€ launcher.py                 # ç»Ÿä¸€å¯åŠ¨å™¨ â­
â”‚
â”œâ”€â”€ configs/                    # é…ç½®ç›®å½• â­
â”‚   â”œâ”€â”€ config.json             # åŸºç¡€é…ç½®
â”‚   â”œâ”€â”€ config.backtest.json    # å›æµ‹ç¯å¢ƒå åŠ 
â”‚   â”œâ”€â”€ config.live.json        # å®ç›˜ç¯å¢ƒå åŠ 
â”‚   â”œâ”€â”€ config.dev.json         # å¼€å‘ç¯å¢ƒå åŠ 
â”‚   â””â”€â”€ macd_params.yaml        # MACD å‚æ•°é¢„è®¾
â”‚
â”œâ”€â”€ rust-core/                  # ğŸ¦€ Rust æ ¸å¿ƒå¼•æ“
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ lib.rs
â”‚       â”œâ”€â”€ main.rs             # gRPC æœåŠ¡å™¨
â”‚       â”œâ”€â”€ kline/              # K çº¿æ•°æ®ç»“æ„
â”‚       â”œâ”€â”€ fractal/            # åˆ†å‹æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ types.rs        # Top/Bottom Fractal
â”‚       â”‚   â”œâ”€â”€ containment.rs  # åŒ…å«å…³ç³»å¤„ç†
â”‚       â”‚   â””â”€â”€ detector.rs     # åˆ†å‹è¯†åˆ«
â”‚       â”œâ”€â”€ stroke/             # ç¬”æ¨¡å— (æ–°ç¬”å®šä¹‰ï¼š3K çº¿)
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ definition.rs   # æ–°ç¬”å®šä¹‰ (3 æ ¹ K çº¿)
â”‚       â”‚   â”œâ”€â”€ validator.rs    # ä¸¥æ ¼éªŒè¯
â”‚       â”‚   â””â”€â”€ calculator.rs   # ç¬”åˆ’åˆ†
â”‚       â”œâ”€â”€ segment/            # çº¿æ®µæ¨¡å— (ç‰¹å¾åºåˆ—)
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ feature_seq.rs  # ç‰¹å¾åºåˆ—
â”‚       â”‚   â”œâ”€â”€ divider.rs      # çº¿æ®µåˆ’åˆ† (ä¸¤ç§æƒ…å†µ)
â”‚       â”‚   â””â”€â”€ strict_rules.rs # ä¸¥æ ¼å®ç°
â”‚       â”œâ”€â”€ center/             # ä¸­æ¢æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ types.rs
â”‚       â”‚   â”œâ”€â”€ detector.rs     # ä¸­æ¢è¯†åˆ«
â”‚       â”‚   â””â”€â”€ expansion.rs    # ä¸­æ¢æ‰©å¼ 
â”‚       â”œâ”€â”€ divergence/         # èƒŒé©°æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ trend.rs        # è¶‹åŠ¿èƒŒé©°
â”‚       â”‚   â”œâ”€â”€ consolidation.rs# ç›˜æ•´èƒŒé©°
â”‚       â”‚   â””â”€â”€ macd_helper.rs  # MACD è¾…åŠ©
â”‚       â”œâ”€â”€ bsp/                # ä¹°å–ç‚¹æ¨¡å—
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ type1.rs        # ç¬¬ä¸€ç±»ä¹°å–ç‚¹
â”‚       â”‚   â”œâ”€â”€ type2.rs        # ç¬¬äºŒç±»ä¹°å–ç‚¹
â”‚       â”‚   â”œâ”€â”€ type3.rs        # ç¬¬ä¸‰ç±»ä¹°å–ç‚¹
â”‚       â”‚   â””â”€â”€ detector.rs     # ç»¼åˆè¯†åˆ«
â”‚       â”œâ”€â”€ indicators/         # æŠ€æœ¯æŒ‡æ ‡
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ macd.rs         # å¯é…ç½® MACD
â”‚       â”‚   â””â”€â”€ ma.rs           # å‡çº¿ç³»ç»Ÿ
â”‚       â”œâ”€â”€ health/             # å¥åº·ç›‘æ§
â”‚       â”‚   â”œâ”€â”€ mod.rs
â”‚       â”‚   â”œâ”€â”€ monitor.rs
â”‚       â”‚   â””â”€â”€ failover.rs
â”‚       â””â”€â”€ grpc/               # gRPC æœåŠ¡
â”‚           â”œâ”€â”€ mod.rs
â”‚           â””â”€â”€ service.rs
â”‚
â”œâ”€â”€ chanlun/                    # ğŸ Python ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ engine.py               # Rust å¼•æ“ç»‘å®š
â”‚   â”œâ”€â”€ analysis/               # åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ fractal.py          # Python åˆ†å‹ (å¤‡ä»½)
â”‚   â”‚   â”œâ”€â”€ stroke.py           # Python ç¬” (å¤‡ä»½)
â”‚   â”‚   â”œâ”€â”€ segment.py          # Python çº¿æ®µ (å¤‡ä»½)
â”‚   â”‚   â”œâ”€â”€ center.py           # Python ä¸­æ¢ (å¤‡ä»½)
â”‚   â”‚   â”œâ”€â”€ divergence.py       # Python èƒŒé©° (å¤‡ä»½)
â”‚   â”‚   â””â”€â”€ bsp.py              # Python ä¹°å–ç‚¹ (å¤‡ä»½)
â”‚   â”œâ”€â”€ data/                   # æ•°æ®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py             # æ•°æ®æºåŸºç±»
â”‚   â”‚   â”œâ”€â”€ akshare.py          # AKShare å®ç°
â”‚   â”‚   â”œâ”€â”€ baostock.py         # Baostock å®ç°
â”‚   â”‚   â””â”€â”€ cache.py            # æœ¬åœ°ç¼“å­˜
â”‚   â”œâ”€â”€ handlers/               # Handler æ’ä»¶ â­
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ log_handler.py      # æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ alert_handler.py    # é¢„è­¦
â”‚   â”‚   â””â”€â”€ data_handler.py     # æ•°æ®
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ config.py           # é…ç½®åŠ è½½ â­
â”‚       â””â”€â”€ helpers.py
â”‚
â”œâ”€â”€ examples/                   # ç­–ç•¥ç¤ºä¾‹åº“ â­ (10 ä¸ªæ¸è¿›ç¤ºä¾‹)
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ 01_basic_fractal/       # ç¤ºä¾‹ 1: åŸºç¡€åˆ†å‹è¯†åˆ«
â”‚   â”œâ”€â”€ 02_stroke_detection/    # ç¤ºä¾‹ 2: ç¬”è¯†åˆ«
â”‚   â”œâ”€â”€ 03_segment_analysis/    # ç¤ºä¾‹ 3: çº¿æ®µåˆ’åˆ†
â”‚   â”œâ”€â”€ 04_center_identification/ # ç¤ºä¾‹ 4: ä¸­æ¢è¯†åˆ«
â”‚   â”œâ”€â”€ 05_divergence_basic/    # ç¤ºä¾‹ 5: åŸºç¡€èƒŒé©°
â”‚   â”œâ”€â”€ 06_bsp_type1/           # ç¤ºä¾‹ 6: ç¬¬ä¸€ç±»ä¹°å–ç‚¹
â”‚   â”œâ”€â”€ 07_bsp_type2/           # ç¤ºä¾‹ 7: ç¬¬äºŒç±»ä¹°å–ç‚¹
â”‚   â”œâ”€â”€ 08_bsp_type3/           # ç¤ºä¾‹ 8: ç¬¬ä¸‰ç±»ä¹°å–ç‚¹
â”‚   â”œâ”€â”€ 09_interval_set/        # ç¤ºä¾‹ 9: åŒºé—´å¥—å®šä½
â”‚   â””â”€â”€ 10_multi_level_analysis/ # ç¤ºä¾‹ 10: å¤šçº§åˆ«è”ç«‹
â”‚
â”œâ”€â”€ cli/                        # CLI å·¥å…· â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py                 # CLI å…¥å£
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ analyze.py          # åˆ†æå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ backtest.py         # å›æµ‹å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ monitor.py          # ç›‘æ§å‘½ä»¤
â”‚   â”‚   â””â”€â”€ server.py           # æœåŠ¡å‘½ä»¤
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ formatters.py
â”‚
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py                 # FastAPI å…¥å£
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ routes.py
â”‚   â”‚   â””â”€â”€ websocket.py
â”‚   â””â”€â”€ database/
â”‚       â”œâ”€â”€ sqlite_db.py
â”‚       â””â”€â”€ models.py
â”‚
â”œâ”€â”€ proto/                      # Protocol Buffers
â”‚   â””â”€â”€ trading.proto           # gRPC æœåŠ¡å®šä¹‰
â”‚
â”œâ”€â”€ scripts/                    # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ install.sh              # ä¸€é”®å®‰è£…
â”‚   â”œâ”€â”€ build.sh                # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ test.sh                 # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ deploy.sh               # éƒ¨ç½²è„šæœ¬
â”‚
â””â”€â”€ tests/                      # æµ‹è¯• â­
    â”œâ”€â”€ test_fractal.py
    â”œâ”€â”€ test_stroke.py
    â”œâ”€â”€ test_segment.py
    â”œâ”€â”€ test_center.py
    â”œâ”€â”€ test_divergence.py
    â”œâ”€â”€ test_bsp.py
    â””â”€â”€ test_integration.py
```

---

## ğŸ“ äºŒã€æ ¸å¿ƒæŠ€æœ¯è§„èŒƒ

### 2.1 åˆ†å‹ (Fractal) -  Lesson 62, 65, 77, 79

**å®šä¹‰:**
- **é¡¶åˆ†å‹:** ç¬¬äºŒ K çº¿é«˜ç‚¹æ˜¯ç›¸é‚»ä¸‰ K çº¿é«˜ç‚¹ä¸­æœ€é«˜çš„ï¼Œä½ç‚¹ä¹Ÿæ˜¯ç›¸é‚»ä¸‰ K çº¿ä½ç‚¹ä¸­æœ€é«˜çš„
- **åº•åˆ†å‹:** ç¬¬äºŒ K çº¿ä½ç‚¹æ˜¯ç›¸é‚»ä¸‰ K çº¿ä½ç‚¹ä¸­æœ€ä½çš„ï¼Œé«˜ç‚¹ä¹Ÿæ˜¯ç›¸é‚»ä¸‰ K çº¿é«˜ç‚¹ä¸­æœ€é«˜çš„

**åŒ…å«å…³ç³»å¤„ç†:**
```rust
// å‘ä¸Šæ—¶ï¼šé«˜é«˜ + ä½é«˜
if direction == Up {
    merged.high = max(k1.high, k2.high);
    merged.low = max(k1.low, k2.low);
}
// å‘ä¸‹æ—¶ï¼šä½ä½ + é«˜ä½
else {
    merged.high = min(k1.high, k2.high);
    merged.low = min(k1.low, k2.low);
}
```

**å®ç°è¦ç‚¹:**
- âœ… å…ˆå¤„ç†åŒ…å«å…³ç³»ï¼Œå†åˆ¤æ–­åˆ†å‹
- âœ… é¡¶åˆ†å‹é¡¶å’Œåº•åˆ†å‹åº•ç®€ç§°"é¡¶"å’Œ"ä½"
- âœ… ä½¿ç”¨ MACD è¾…åŠ©åˆ¤æ–­åˆ†å‹åŠ›åº¦ (Lesson 79)

---

### 2.2 ç¬” (Stroke) - Lesson 62, 65, 77, 81

**æ–°ç¬”å®šä¹‰ (å…³é”®!):**
1. é¡¶åˆ†å‹ä¸åº•åˆ†å‹ç»è¿‡åŒ…å«å¤„ç†åï¼Œ**ä¸å…è®¸å…±ç”¨ K çº¿**
2. é¡¶åˆ†å‹ä¸­**æœ€é«˜ K çº¿**å’Œåº•åˆ†å‹çš„**æœ€ä½ K çº¿**ä¹‹é—´ï¼ˆä¸åŒ…æ‹¬è¿™ä¸¤ K çº¿ï¼‰ï¼Œ**ä¸è€ƒè™‘åŒ…å«å…³ç³»**ï¼Œ**è‡³å°‘æœ‰ 3 æ ¹**ï¼ˆåŒ…æ‹¬ 3 æ ¹ï¼‰ä»¥ä¸Š K çº¿

```rust
// æ–°ç¬”å®šä¹‰éªŒè¯
fn validate_stroke(top_fractal: &Fractal, bottom_fractal: &Fractal, klines: &[Kline]) -> bool {
    // 1. ä¸å…±ç”¨ K çº¿
    if top_fractal.shared_kline_index == bottom_fractal.shared_kline_index {
        return false;
    }
    
    // 2. é¡¶æœ€é«˜ K çº¿ å’Œ åº•æœ€ä½ K çº¿ ä¹‹é—´è‡³å°‘ 3 æ ¹ K çº¿
    let top_peak_idx = find_peak_kline_index(top_fractal, klines);
    let bottom_valley_idx = find_valley_kline_index(bottom_fractal, klines);
    
    let kline_count = (top_peak_idx.abs_diff(bottom_valley_idx)) - 1;
    if kline_count < 3 {
        return false;
    }
    
    true
}
```

**å®ç°è¦ç‚¹:**
- âœ… ä½¿ç”¨æ–°ç¬”å®šä¹‰å‡å°‘è½¯ä»¶é—´æ•°æ®å·®å¼‚å½±å“ (Lesson 65)
- âœ… ç¬”çš„åˆ’åˆ†æ˜¯å”¯ä¸€çš„ (Lesson 77)
- âœ… ç»“åˆå¾‹é€‚ç”¨ (Lesson 64)

---

### 2.3 çº¿æ®µ (Segment) - Lesson 62, 67, 68, 71, 78

**å®šä¹‰:** è‡³å°‘ç”±**ä¸‰ç¬”**ç»„æˆ

**ç‰¹å¾åºåˆ— (Feature Sequence):**
- ä»¥**å‘ä¸Šç¬”**å¼€å§‹çš„çº¿æ®µï¼Œç‰¹å¾åºåˆ—ä¸º `X1, X2, ..., Xn`ï¼ˆå‘ä¸‹çš„ç¬”ï¼‰
- ä»¥**å‘ä¸‹ç¬”**å¼€å§‹çš„çº¿æ®µï¼Œç‰¹å¾åºåˆ—ä¸º `S1, S2, ..., Sn`ï¼ˆå‘ä¸Šçš„ç¬”ï¼‰

**çº¿æ®µç»“æŸçš„ä¸¤ç§æƒ…å†µ (Lesson 67):**

**æƒ…å†µä¸€ (æ— ç¼ºå£):**
```
ç‰¹å¾åºåˆ—çš„é¡¶åˆ†å‹ä¸­ï¼Œç¬¬ä¸€å’Œç¬¬äºŒå…ƒç´ é—´ä¸å­˜åœ¨ç¼ºå£
â†’ çº¿æ®µåœ¨è¯¥é¡¶åˆ†å‹é«˜ç‚¹å¤„ç»“æŸ
```

**æƒ…å†µäºŒ (æœ‰ç¼ºå£):**
```
ç‰¹å¾åºåˆ—çš„é¡¶åˆ†å‹ä¸­ï¼Œç¬¬ä¸€å’Œç¬¬äºŒå…ƒç´ é—´å­˜åœ¨ç¼ºå£
â†’ éœ€è¦ä»è¯¥åˆ†å‹æœ€é«˜ç‚¹å¼€å§‹çš„å‘ä¸‹ä¸€ç¬”å¼€å§‹çš„åºåˆ—å‡ºç°åº•åˆ†å‹
â†’ çº¿æ®µæ‰ç»“æŸ
```

**å®ç°è¦ç‚¹:**
- âœ… åˆ†ä¸¤ç§æƒ…å†µåˆ¤æ–­çº¿æ®µç»“æŸ
- âœ… ç¬¬äºŒç§æƒ…å†µçš„ç¬¬äºŒç‰¹å¾åºåˆ—å¿…é¡»è¿›è¡ŒåŒ…å«å¤„ç† (Lesson 71)
- âœ… çº¿æ®µå¿…é¡»è¢«çº¿æ®µæ‰€ç ´åæ‰èƒ½ç¡®å®šå…¶å®Œæˆ (Lesson 67)
- âœ… åŒä¸€çº¿æ®µä¸­ï¼Œé¡¶è‚¯å®šè¦é«˜äºåº•

---

### 2.4 ä¸­æ¢ (Center) - Lesson 18, 20, 63

**å®šä¹‰:** æŸçº§åˆ«èµ°åŠ¿ç±»å‹ä¸­ï¼Œè¢«**è‡³å°‘ä¸‰ä¸ªè¿ç»­æ¬¡çº§åˆ«èµ°åŠ¿ç±»å‹**æ‰€é‡å çš„éƒ¨åˆ†

**å®ç°è¦ç‚¹:**
- âœ… ä¸¥æ ¼æŒ‰å®šä¹‰è¯†åˆ«ä¸­æ¢
- âœ… ä¸­æ¢å»¶ä¼¸è¶…è¿‡ 9 æ®µåˆ™çº§åˆ«æ‰©å¼  (Lesson 20)
- âœ… å¤šçº§åˆ«è”ç«‹åˆ†æ (Lesson 14)

---

### 2.5 èƒŒé©° (Divergence) - Lesson 15, 24, 27

**å®šä¹‰:** è¶‹åŠ¿ä¸­ï¼Œåä¸€æ®µèµ°åŠ¿åŠ›åº¦å¼±äºå‰ä¸€æ®µ

**åˆ¤æ–­æ–¹æ³•:**
1. **MACD æŸ±å­é¢ç§¯æ¯”è¾ƒ** (Lesson 24)
   - ä¸Šæ¶¨èƒŒé©°ï¼šè‚¡ä»·åˆ›æ–°é«˜ï¼Œä½† MACD çº¢æŸ±é¢ç§¯ç¼©å°
   - ä¸‹è·ŒèƒŒé©°ï¼šè‚¡ä»·åˆ›æ–°ä½ï¼Œä½† MACD ç»¿æŸ±é¢ç§¯ç¼©å°
2. **MACD é»„ç™½çº¿å›æ‹‰ 0 è½´** (Lesson 24)
   - B æ®µæŠŠ MACD é»„ç™½çº¿å›æ‹‰åˆ° 0 è½´é™„è¿‘
3. **å‡çº¿é¢ç§¯æ¯”è¾ƒ** (Lesson 15)
   - ç¼ ä¸­è¯´ç¦…è¶‹åŠ¿åŠ›åº¦

**MACD å‚æ•°é…ç½®:**
```yaml
macd:
  fast_period: 12      # æ ‡å‡†ï¼š12
  slow_period: 26      # æ ‡å‡†ï¼š26
  signal_period: 9     # æ ‡å‡†ï¼š9
  # ç¼ å¸ˆä½¿ç”¨æ™®é€šå‚æ•°é•¿ä¸€å€ (Lesson 24)
```

**èƒŒé©° vs ç›˜æ•´èƒŒé©°:**
| | èƒŒé©° | ç›˜æ•´èƒŒé©° |
|---|---|---|
| åœºæ™¯ | è¶‹åŠ¿ä¸­ | ç›˜æ•´ä¸­ |
| å›è·Œ | è‡³å°‘å›åˆ° B æ®µä¸­æ¢ | å¯èƒ½æ„æˆç¬¬ä¸‰ç±»ä¹°å–ç‚¹ |
| MACD | C æ®µé¢ç§¯ < A æ®µ | C æ®µä¸ç ´ä¸­æ¢ï¼Œé¢ç§¯ < A æ®µ |

---

### 2.6 ä¸‰ç±»ä¹°å–ç‚¹ (Buy/Sell Points) - Lesson 12, 20, 21, 53

**ç¬¬ä¸€ç±»ä¹°å–ç‚¹:**
- **å®šä¹‰:** è¶‹åŠ¿èƒŒé©°ç‚¹
- **æ¡ä»¶:** 
  - å‘ç”Ÿåœ¨ç”·ä¸Šä½/å¥³ä¸Šä½æœ€åä¸€æ¬¡ç¼ ç»•å
  - ä¼´éšèƒŒé©° (MACD è¾…åŠ©ç¡®è®¤)
- **ç‰¹ç‚¹:** é£é™©æœ€å¤§ä½†æ”¶ç›Šæœ€å¤§

**ç¬¬äºŒç±»ä¹°å–ç‚¹:**
- **å®šä¹‰:** æ¬¡çº§åˆ«å›è¸©ä¸ç ´å‰ä½/å‰é«˜
- **æ¡ä»¶:**
  - ç¬¬ä¸€ç±»ä¹°ç‚¹åçš„æ¬¡çº§åˆ«å›è¸©
  - ä¸è·Œç ´ç¬¬ä¸€ç±»ä¹°ç‚¹çš„ä½ç‚¹ (ä¹°ç‚¹) / ä¸å‡ç ´ç¬¬ä¸€ç±»å–ç‚¹çš„é«˜ç‚¹ (å–ç‚¹)
- **ç‰¹ç‚¹:** é£é™©è¾ƒå°ï¼Œè¶‹åŠ¿ä¸­çš„ä»‹å…¥æœºä¼š

**ç¬¬ä¸‰ç±»ä¹°å–ç‚¹:**
- **å®šä¹‰:** æ¬¡çº§åˆ«å›è¸©ä¸ç ´ä¸­æ¢
- **æ¡ä»¶:**
  - æ¬¡çº§åˆ«èµ°åŠ¿ç±»å‹å‘ä¸Šç¦»å¼€ä¸­æ¢
  - æ¬¡çº§åˆ«èµ°åŠ¿ç±»å‹å›è¯•ï¼Œå…¶ä½ç‚¹ä¸è·Œç ´ ZG(ä¸­æ¢é«˜ç‚¹)
- **ç‰¹ç‚¹:** ç¡®è®¤è¶‹åŠ¿å»¶ç»­

**ç¼ ä¸­è¯´ç¦…ä¹°ç‚¹å®šå¾‹ (Lesson 14):**
> å¤§çº§åˆ«çš„ç¬¬äºŒç±»ä¹°ç‚¹ç”±æ¬¡ä¸€çº§åˆ«ç›¸åº”èµ°åŠ¿çš„ç¬¬ä¸€ç±»ä¹°ç‚¹æ„æˆ

---

### 2.7 åŒºé—´å¥—å®šç† (Interval Set) - Lesson 27, 61

**å®šä¹‰:** æŸå¤§çº§åˆ«çš„è½¬æŠ˜ç‚¹ï¼Œå¯ä»¥é€šè¿‡ä¸åŒçº§åˆ«èƒŒé©°æ®µçš„é€çº§æ”¶ç¼©èŒƒå›´è€Œç¡®å®š

**ç²¾ç¡®å¤§è½¬æŠ˜ç‚¹å¯»æ‰¾ç¨‹åº:**
```
1. åœ¨å¤§çº§åˆ«å›¾é‡Œæ‰¾åˆ°èƒŒé©°æ®µ
2. åœ¨æ¬¡çº§åˆ«å›¾é‡Œæ‰¾å‡ºç›¸åº”èƒŒé©°æ®µ
3. ç»§ç»­åˆ°æ¬¡æ¬¡çº§åˆ«...
4. ç›´åˆ°æœ€ä½çº§åˆ«ï¼ˆå¦‚ 1 åˆ†é’Ÿï¼‰
â†’ ç†è®ºä¸Šå¯ç²¾ç¡®åˆ°ç¬”çš„èƒŒé©°
```

**å®ç°è¦ç‚¹:**
- âœ… æ”¯æŒå¤šçº§åˆ«é€’å½’æŸ¥æ‰¾
- âœ… 1 åˆ†é’ŸèƒŒé©°æ®µå·²è¶³å¤Ÿç²¾ç¡® (Lesson 61)
- âœ… å¤§çº§åˆ«ç›˜æ•´èƒŒé©°æ‰¾å†å²æ€§åº•éƒ¨ (Lesson 27)

---

### 2.8 ä¸­é˜´é˜¶æ®µ (Middle Yin) - Lesson 89, 90

**å®šä¹‰:** èµ°åŠ¿è½¬æŠ˜åçš„è¿‡æ¸¡æœŸï¼Œè¡¨ç°ä¸ºä¸­æ¢éœ‡è¡

**å¤„ç†åŸåˆ™:**
1. ç¡®è®¤å¤§çº§åˆ«èƒŒé©°
2. **ç­‰å¾… 5 åˆ†é’Ÿä¸­æ¢å½¢æˆ (100% å¿…ç„¶)** (Lesson 89)
3. æŒ‰ä¸­æ¢éœ‡è¡æ“ä½œ
4. ç­‰å¾…ç¬¬ä¸‰ç±»ä¹°å–ç‚¹å‡ºç°

**å®ç°è¦ç‚¹:**
- âœ… ä¸­é˜´é˜¶æ®µå¯æŒ‰ä¸­æ¢éœ‡è¡å¤„ç†
- âœ… è§‚å¯Ÿ MACD æ”¶å£æƒ…å†µåˆ¤æ–­ç»“æŸæ—¶é—´
- âœ… å¤§çº§åˆ«æ“ä½œè€…å¯å¿½ç•¥å°çº§åˆ«ä¸­é˜´è¿‡ç¨‹

---

## âš™ï¸ ä¸‰ã€é…ç½®ç³»ç»Ÿè®¾è®¡

### 3.1 é…ç½®åˆ†å±‚ (Layered Configuration)

**åŸºç¡€é…ç½® (`configs/config.json`):**
```json
{
  "_comment": "ChanLun Invester åŸºç¡€é…ç½®",
  "version": "2.0",
  "environment": "dev",
  
  "data": {
    "folder": "./data",
    "provider": "akshare",
    "cache_enabled": true,
    "cache_ttl": 3600
  },
  
  "engine": {
    "rust_path": "./rust-core/target/release/libtrading_core.so",
    "log_level": "INFO",
    "debug": false
  },
  
  "handlers": {
    "log": "chanlun.handlers.log_handler.ConsoleLogHandler",
    "alert": "chanlun.handlers.alert_handler.ConsoleAlertHandler",
    "data": "chanlun.handlers.data_handler.LocalDataHandler"
  },
  
  "chanlun": {
    "stroke_definition": "new_3kline",
    "segment_strict": true,
    "feature_sequence_enabled": true,
    "containment_handling": true
  },
  
  "macd": {
    "fast_period": 12,
    "slow_period": 26,
    "signal_period": 9
  },
  
  "limits": {
    "max_symbols": 100,
    "max_klines": 10000,
    "max_memory_mb": 500
  }
}
```

**å›æµ‹ç¯å¢ƒå åŠ  (`configs/config.backtest.json`):**
```json
{
  "_comment": "å›æµ‹ç¯å¢ƒé…ç½®",
  "environment": "backtest",
  
  "backtest": {
    "start_date": "2020-01-01",
    "end_date": "2024-12-31",
    "initial_capital": 100000,
    "commission_rate": 0.0003,
    "slippage": 0.001
  },
  
  "handlers": {
    "log": "chanlun.handlers.log_handler.FileLogHandler",
    "log_file": "./logs/backtest.log"
  }
}
```

**å®ç›˜ç¯å¢ƒå åŠ  (`configs/config.live.json`):**
```json
{
  "_comment": "å®ç›˜ç¯å¢ƒé…ç½®",
  "environment": "live",
  
  "data": {
    "provider": "realtime",
    "cache_enabled": false
  },
  
  "live": {
    "brokerage": "simulate",
    "auto_trade": false,
    "risk_check": true,
    "max_position_pct": 0.3
  },
  
  "handlers": {
    "alert": "chanlun.handlers.alert_handler.WebSocketAlertHandler",
    "alert_websocket": "ws://localhost:8765"
  }
}
```

### 3.2 é…ç½®åŠ è½½å™¨

```python
# chanlun/utils/config.py
class ConfigLoader:
    def load(self, overlay_path: Optional[str] = None) -> Dict[str, Any]:
        """åŠ è½½é…ç½®å¹¶å åŠ """
        config = self._load_json(self.base_path)
        
        if overlay_path:
            overlay = self._load_json(Path(overlay_path))
            config = self._deep_merge(config, overlay)
        
        self._validate(config)
        return config
```

---

## ğŸš€ å››ã€ç»Ÿä¸€å¯åŠ¨å™¨ (CLI)

### 4.1 å‘½ä»¤è®¾è®¡

```bash
# åˆ†æè‚¡ç¥¨ç¼ è®ºç»“æ„
python launcher.py analyze 000001.SZ --level 30m

# ç­–ç•¥å›æµ‹
python launcher.py backtest examples/06_bsp_type1/main.py \
  --start 2020-01-01 --end 2024-12-31

# å®æ—¶ç›‘æ§
python launcher.py monitor 000001.SZ --level 5m --alert telegram

# å¯åŠ¨ API æœåŠ¡
python launcher.py server --port 8000

# å¯åŠ¨ Jupyter ç ”ç©¶ç¯å¢ƒ
python launcher.py research --port 8888
```

### 4.2 CLI å®ç°

```python
# cli/commands/analyze.py
def run_analyze(args):
    # åŠ è½½é…ç½®
    config = ConfigLoader().load(args.config)
    
    # åˆå§‹åŒ–
    engine = ChanLunEngine()
    data_source = AKShareDataSource()
    
    # ä¸‹è½½æ•°æ®
    klines = data_source.get_klines(args.symbol, level=args.level, limit=1000)
    
    # åˆ†æèµ°åŠ¿
    analysis = engine.analyze(klines)
    
    print(f"âœ“ åˆ†å‹ï¼š{len(analysis.fractals)} ä¸ª")
    print(f"âœ“ ç¬”ï¼š{len(analysis.strokes)} ä¸ª")
    print(f"âœ“ çº¿æ®µï¼š{len(analysis.segments)} ä¸ª")
    print(f"âœ“ ä¸­æ¢ï¼š{len(analysis.centers)} ä¸ª")
    
    # è¯†åˆ«ä¹°å–ç‚¹
    bsp_list = detect_bsp(analysis)
    print(f"âœ“ ä¹°å–ç‚¹ï¼š{len(bsp_list)} ä¸ª")
```

---

## ğŸ“š äº”ã€10 ä¸ªæ¸è¿›å¼ç­–ç•¥ç¤ºä¾‹

### ç¤ºä¾‹ 1: åŸºç¡€åˆ†å‹è¯†åˆ« (`01_basic_fractal/`)
**ç›®æ ‡:** ç†è§£é¡¶åˆ†å‹å’Œåº•åˆ†å‹ï¼ŒæŒæ¡åŒ…å«å…³ç³»å¤„ç†

### ç¤ºä¾‹ 2: ç¬”è¯†åˆ« (`02_stroke_detection/`)
**ç›®æ ‡:** ä½¿ç”¨æ–°ç¬”å®šä¹‰ (3K çº¿) è¿›è¡Œç¬”åˆ’åˆ†

### ç¤ºä¾‹ 3: çº¿æ®µåˆ’åˆ† (`03_segment_analysis/`)
**ç›®æ ‡:** ç‰¹å¾åºåˆ—æ–¹æ³•ï¼Œä¸¤ç§æƒ…å†µåˆ¤æ–­

### ç¤ºä¾‹ 4: ä¸­æ¢è¯†åˆ« (`04_center_identification/`)
**ç›®æ ‡:** è¯†åˆ«å„çº§åˆ«ä¸­æ¢ï¼Œç†è§£ä¸­æ¢æ‰©å¼ 

### ç¤ºä¾‹ 5: åŸºç¡€èƒŒé©° (`05_divergence_basic/`)
**ç›®æ ‡:** MACD è¾…åŠ©åˆ¤æ–­èƒŒé©°å’Œç›˜æ•´èƒŒé©°

### ç¤ºä¾‹ 6: ç¬¬ä¸€ç±»ä¹°å–ç‚¹ (`06_bsp_type1/`)
**ç›®æ ‡:** è¶‹åŠ¿èƒŒé©°ç‚¹è¯†åˆ«ï¼Œé«˜é£é™©é«˜æ”¶ç›Š

### ç¤ºä¾‹ 7: ç¬¬äºŒç±»ä¹°å–ç‚¹ (`07_bsp_type2/`)
**ç›®æ ‡:** æ¬¡çº§åˆ«å›è¸©ï¼Œä½é£é™©ä»‹å…¥

### ç¤ºä¾‹ 8: ç¬¬ä¸‰ç±»ä¹°å–ç‚¹ (`08_bsp_type3/`)
**ç›®æ ‡:** çªç ´ä¸­æ¢åå›è¸©ä¸ç ´ï¼Œè¶‹åŠ¿å»¶ç»­ç¡®è®¤

### ç¤ºä¾‹ 9: åŒºé—´å¥—å®šä½ (`09_interval_set/`)
**ç›®æ ‡:** å¤šçº§åˆ«é€’å½’æŸ¥æ‰¾èƒŒé©°ï¼Œç²¾ç¡®å®šä½

### ç¤ºä¾‹ 10: å¤šçº§åˆ«è”ç«‹ (`10_multi_level_analysis/`)
**ç›®æ ‡:** æ—¥çº¿ +30 åˆ†é’Ÿ +5 åˆ†é’Ÿ ç»¼åˆåˆ†æ

---

## ğŸ“… å…­ã€å¼€å‘è·¯çº¿å›¾ (10 å‘¨)

### Phase 1: åŸºç¡€æ¶æ„ (2 å‘¨) - 2026-02-28 to 2026-03-14

**Week 1 (2026-02-28 to 2026-03-07):**
- [x] âœ… é¡¹ç›®ç»“æ„åˆ›å»º
- [x] âœ… Rust workspace é…ç½®
- [ ] ğŸ”„ K çº¿æ•°æ®ç»“æ„ (rust-core/src/kline/)
- [ ] ğŸ”„ é…ç½®åŠ è½½å™¨ (chanlun/utils/config.py)
- [ ] ğŸ”„ ç»Ÿä¸€å¯åŠ¨å™¨æ¡†æ¶ (launcher.py)
- [ ] ğŸ”„ Docker åŸºç¡€é…ç½®

**Week 2 (2026-03-08 to 2026-03-14):**
- [ ] ğŸ”„ åˆ†å‹æ¨¡å— (rust-core/src/fractal/)
  - [ ] åŒ…å«å…³ç³»å¤„ç†
  - [ ] é¡¶/åº•åˆ†å‹è¯†åˆ«
- [ ] ğŸ”„ Python å¤‡ä»½å±‚æ¡†æ¶ (chanlun/analysis/)
- [ ] ğŸ”„ gRPC proto å®šä¹‰
- [ ] ğŸ”„ ç¤ºä¾‹ 1 ä»£ç æ¡†æ¶

**äº¤ä»˜ç‰©:**
- âœ… é¡¹ç›®éª¨æ¶
- âœ… é…ç½®ç³»ç»Ÿå·¥ä½œ
- âœ… CLI åŸºç¡€å‘½ä»¤
- ğŸ“ ç¤ºä¾‹ 1 å¯è¿è¡Œ

---

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (4 å‘¨) - 2026-03-15 to 2026-04-11

**Week 3 (2026-03-15 to 2026-03-21):**
- [ ] ğŸ”„ ç¬”æ¨¡å— (rust-core/src/stroke/)
  - [ ] æ–°ç¬”å®šä¹‰ (3K çº¿) å®ç°
  - [ ] ä¸¥æ ¼éªŒè¯é€»è¾‘
- [ ] ğŸ”„ ç¤ºä¾‹ 2 ä»£ç 

**Week 4 (2026-03-22 to 2026-03-28):**
- [ ] ğŸ”„ çº¿æ®µæ¨¡å— (rust-core/src/segment/)
  - [ ] ç‰¹å¾åºåˆ—å®ç°
  - [ ] ä¸¤ç§æƒ…å†µåˆ¤æ–­
- [ ] ğŸ”„ ç¤ºä¾‹ 3 ä»£ç 

**Week 5 (2026-03-29 to 2026-04-04):**
- [ ] ğŸ”„ ä¸­æ¢æ¨¡å— (rust-core/src/center/)
  - [ ] ä¸­æ¢è¯†åˆ«
  - [ ] ä¸­æ¢æ‰©å¼ åˆ¤æ–­
- [ ] ğŸ”„ ç¤ºä¾‹ 4 ä»£ç 

**Week 6 (2026-04-05 to 2026-04-11):**
- [ ] ğŸ”„ èƒŒé©°æ¨¡å— (rust-core/src/divergence/)
  - [ ] è¶‹åŠ¿èƒŒé©°
  - [ ] ç›˜æ•´èƒŒé©°
  - [ ] MACD è¾…åŠ© (å¯é…ç½®å‚æ•°)
- [ ] ğŸ”„ ç¤ºä¾‹ 5 ä»£ç 

**äº¤ä»˜ç‰©:**
- âœ… å½¢æ€å­¦å®Œæ•´å®ç° (åˆ†å‹â†’ç¬”â†’çº¿æ®µâ†’ä¸­æ¢)
- âœ… åŠ¨åŠ›å­¦åŸºç¡€ (èƒŒé©°åˆ¤æ–­)
- âœ… ç¤ºä¾‹ 1-5 å¯è¿è¡Œ

---

### Phase 3: ä¹°å–ç‚¹ä¸é«˜çº§åŠŸèƒ½ (2 å‘¨) - 2026-04-12 to 2026-04-25

**Week 7 (2026-04-12 to 2026-04-18):**
- [ ] ğŸ”„ ä¹°å–ç‚¹æ¨¡å— (rust-core/src/bsp/)
  - [ ] ç¬¬ä¸€ç±»ä¹°å–ç‚¹
  - [ ] ç¬¬äºŒç±»ä¹°å–ç‚¹
  - [ ] ç¬¬ä¸‰ç±»ä¹°å–ç‚¹
- [ ] ğŸ”„ ç¤ºä¾‹ 6-8 ä»£ç 

**Week 8 (2026-04-19 to 2026-04-25):**
- [ ] ğŸ”„ åŒºé—´å¥—å®šä½ (rust-core/src/interval_set/)
- [ ] ğŸ”„ ä¸­é˜´é˜¶æ®µè¯†åˆ« (rust-core/src/middle_yin/)
- [ ] ğŸ”„ å¤šçº§åˆ«è”ç«‹åˆ†æ
- [ ] ğŸ”„ ç¤ºä¾‹ 9-10 ä»£ç 

**äº¤ä»˜ç‰©:**
- âœ… ä¸‰ç±»ä¹°å–ç‚¹å®Œæ•´è¯†åˆ«
- âœ… åŒºé—´å¥—ç²¾ç¡®å®šä½
- âœ… ç¤ºä¾‹ 6-10 å¯è¿è¡Œ
- âœ… å¤šçº§åˆ«åˆ†æèƒ½åŠ›

---

### Phase 4: éƒ¨ç½²ä¼˜åŒ–ä¸æµ‹è¯• (2 å‘¨) - 2026-04-26 to 2026-05-09

**Week 9 (2026-04-26 to 2026-05-02):**
- [ ] ğŸ”„ å¥åº·ç›‘æ§ç³»ç»Ÿ (rust-core/src/health/)
- [ ] ğŸ”„ è‡ªåŠ¨æ•…éšœåˆ‡æ¢å®ç°
- [ ] ğŸ”„ Docker é•œåƒä¼˜åŒ– (<500MB)
- [ ] ğŸ”„ ä¸€é”®å®‰è£…è„šæœ¬ (scripts/install.sh)

**Week 10 (2026-05-03 to 2026-05-09):**
- [ ] ğŸ”„ å•å…ƒæµ‹è¯•è¦†ç›– (tests/)
  - [ ] åˆ†å‹æµ‹è¯•
  - [ ] ç¬”æµ‹è¯•
  - [ ] çº¿æ®µæµ‹è¯•
  - [ ] ä¸­æ¢æµ‹è¯•
  - [ ] èƒŒé©°æµ‹è¯•
  - [ ] ä¹°å–ç‚¹æµ‹è¯•
- [ ] ğŸ”„ é›†æˆæµ‹è¯•
- [ ] ğŸ”„ æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] ğŸ”„ æ–‡æ¡£å®Œå–„

**äº¤ä»˜ç‰©:**
- âœ… è‡ªåŠ¨æ•…éšœåˆ‡æ¢å·¥ä½œ
- âœ… Docker é•œåƒ <500MB
- âœ… æµ‹è¯•è¦†ç›–ç‡ >80%
- âœ… å®Œæ•´æ–‡æ¡£
- âœ… v1.0 Release

---

## ğŸ¯ ä¸ƒã€æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | LEAN | ChanLun v1 | **ChanLun v2 ç›®æ ‡** |
|------|------|------------|---------------------|
| **å®‰è£…æ—¶é—´** | 30 åˆ†é’Ÿ + | 10 åˆ†é’Ÿ | **<5 åˆ†é’Ÿ** âœ… |
| **å¯åŠ¨æ—¶é—´** | 30 ç§’ | 10 ç§’ | **<5 ç§’** âœ… |
| **å†…å­˜å ç”¨** | 500MB+ | 300MB | **<200MB** âœ… |
| **Docker é•œåƒ** | 2GB+ | 800MB | **<500MB** âœ… |
| **æ–‡ä»¶æ•°é‡** | 6000+ | 200 | **<1000** âœ… |
| **å­¦ä¹ æ›²çº¿** | 1-2 å‘¨ | 3-5 å¤© | **1-2 å¤©** âœ… |

---

## ğŸ§ª å…«ã€æµ‹è¯•ç­–ç•¥

### 8.1 å•å…ƒæµ‹è¯•

```python
# tests/test_stroke.py
def test_new_stroke_definition():
    """æµ‹è¯•æ–°ç¬”å®šä¹‰ (3K çº¿)"""
    engine = ChanLunEngine()
    
    # æ„é€ ç¬¦åˆæ–°ç¬”å®šä¹‰çš„ K çº¿åºåˆ—
    klines = create_klines_for_stroke_test()
    
    strokes = engine.detect_strokes(klines)
    
    # éªŒè¯é¡¶åº•åˆ†å‹ä¸å…±ç”¨ K çº¿
    # éªŒè¯é¡¶æœ€é«˜å’Œåº•æœ€ä½ä¹‹é—´è‡³å°‘ 3 æ ¹ K çº¿
    assert len(strokes) > 0
    for stroke in strokes:
        assert stroke.kline_count >= 3
```

### 8.2 é›†æˆæµ‹è¯•

```python
# tests/test_integration.py
def test_full_analysis_pipeline():
    """æµ‹è¯•å®Œæ•´åˆ†ææµç¨‹"""
    # ä¸‹è½½çœŸå®æ•°æ®
    # åˆ†æåˆ†å‹â†’ç¬”â†’çº¿æ®µâ†’ä¸­æ¢â†’èƒŒé©°â†’ä¹°å–ç‚¹
    # éªŒè¯ç»“æœåˆç†æ€§
```

### 8.3 æ€§èƒ½æµ‹è¯•

```bash
# åŸºå‡†æµ‹è¯•
cd rust-core && cargo bench

# ç›®æ ‡:
# - åˆ†å‹è¯†åˆ«ï¼š<1ms (1000 æ¡ K çº¿)
# - ç¬”åˆ’åˆ†ï¼š<2ms
# - çº¿æ®µåˆ’åˆ†ï¼š<5ms
# - ä¹°å–ç‚¹è¯†åˆ«ï¼š<10ms
```

---

## ğŸ› ï¸ ä¹ã€æŠ€æœ¯æ ˆé€‰å‹

### åç«¯æ ¸å¿ƒ
| ç»„ä»¶ | æŠ€æœ¯ | ç†ç”± |
|------|------|------|
| **æ ¸å¿ƒå¼•æ“** | Rust | æ€§èƒ½ã€å®‰å…¨æ€§ã€å¹¶å‘æ€§ |
| **é›†æˆå±‚** | Python | çµæ´»æ€§ã€å¿«é€Ÿè¿­ä»£ã€ç”Ÿæ€ |
| **é€šä¿¡** | gRPC | è¯­è¨€æ— å…³ã€å¥åº·æ£€æŸ¥ã€é«˜æ€§èƒ½ |
| **é…ç½®** | JSON + YAML | æ˜“è¯»ã€æ˜“ç¼–è¾‘ã€åˆ†å±‚æ”¯æŒ |

### æ•°æ®ä¸å­˜å‚¨
| ç»„ä»¶ | æŠ€æœ¯ | ç†ç”± |
|------|------|------|
| **æ•°æ®æº** | AKShare/Baostock | å…è´¹ã€A è‚¡å…¨è¦†ç›– |
| **ç¼“å­˜** | æœ¬åœ°æ–‡ä»¶ + SQLite | é›¶æˆæœ¬ã€ç®€å•å¯é  |
| **æ•°æ®åº“** | SQLite | è½»é‡ã€é›¶é…ç½® |

### éƒ¨ç½²
| ç»„ä»¶ | æŠ€æœ¯ | ç†ç”± |
|------|------|------|
| **å®¹å™¨åŒ–** | Docker | ä¸€è‡´æ€§ã€æ˜“éƒ¨ç½² |
| **ç¼–æ’** | Docker Compose | ç®€å•ã€å¤šæœåŠ¡ç®¡ç† |
| **ç›‘æ§** | è‡ªå»ºå¥åº·æ£€æŸ¥ | è½»é‡ã€å®šåˆ¶åŒ– |

---

## ğŸ“Š åã€é£é™©ç®¡ç†

### æŠ€æœ¯é£é™©
| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| Rust å­¦ä¹ æ›²çº¿ | ä¸­ | ä½ | Python å¤‡ä»½ï¼Œæ¸è¿›å¼å¼€å‘ |
| gRPC å¤æ‚æ€§ | ä½ | ä¸­ | ä½¿ç”¨æˆç†Ÿåº“ï¼Œå……åˆ†æµ‹è¯• |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä½ | ä¸­ | æ—©æœŸåŸºå‡†æµ‹è¯•ï¼ŒæŒç»­ä¼˜åŒ– |

### é¡¹ç›®é£é™©
| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| è¿›åº¦å»¶è¯¯ | ä¸­ | ä¸­ | æ•æ·å¼€å‘ï¼Œæ¯ä¸¤å‘¨äº¤ä»˜ |
| éœ€æ±‚å˜æ›´ | é«˜ | ä¸­ | æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“æ‰©å±• |
| æ•°æ®æºé—®é¢˜ | ä½ | é«˜ | å¤šæ•°æ®æºæ”¯æŒ (AKShare+Baostock) |

---

## ğŸ“ åä¸€ã€äº¤ä»˜æ¸…å•

### Phase 1 äº¤ä»˜ (Week 2)
- [ ] é¡¹ç›®éª¨æ¶
- [ ] é…ç½®ç³»ç»Ÿ
- [ ] CLI åŸºç¡€æ¡†æ¶
- [ ] Docker åŸºç¡€é…ç½®
- [ ] ç¤ºä¾‹ 1 (åˆ†å‹è¯†åˆ«)

### Phase 2 äº¤ä»˜ (Week 6)
- [ ] åˆ†å‹æ¨¡å— (Rust + Python)
- [ ] ç¬”æ¨¡å— (æ–°ç¬”å®šä¹‰)
- [ ] çº¿æ®µæ¨¡å— (ç‰¹å¾åºåˆ—)
- [ ] ä¸­æ¢æ¨¡å—
- [ ] èƒŒé©°æ¨¡å— (MACD è¾…åŠ©)
- [ ] ç¤ºä¾‹ 1-5

### Phase 3 äº¤ä»˜ (Week 8)
- [ ] ä¸‰ç±»ä¹°å–ç‚¹è¯†åˆ«
- [ ] åŒºé—´å¥—å®šä½
- [ ] ä¸­é˜´é˜¶æ®µè¯†åˆ«
- [ ] å¤šçº§åˆ«è”ç«‹
- [ ] ç¤ºä¾‹ 6-10

### Phase 4 äº¤ä»˜ (Week 10)
- [ ] å¥åº·ç›‘æ§
- [ ] è‡ªåŠ¨æ•…éšœåˆ‡æ¢
- [ ] Docker é•œåƒ <500MB
- [ ] æµ‹è¯•è¦†ç›–ç‡ >80%
- [ ] å®Œæ•´æ–‡æ¡£
- [ ] **v1.0 Release** ğŸ‰

---

## ğŸ“ åäºŒã€å­¦ä¹ èµ„æº

### å¿…è¯»æ–‡æ¡£
1. ç¼ ä¸­è¯´ç¦… æ•™ä½ ç‚’è‚¡ç¥¨ 1-108 è¯¾ (æœ¬æ–‡æ¡£ç†è®ºåŸºç¡€)
2. LOCAL_DEPLOYMENT_V2.md (æ¶æ„è®¾è®¡)
3. chanlunskill-complete.md (ç†è®ºç²¾è¦)

### å¼€å‘æ–‡æ¡£
1. README.md - é¡¹ç›®è¯´æ˜
2. ARCHITECTURE.md - æ¶æ„è¯¦è§£
3. API.md - gRPC API æ–‡æ¡£

### ç¤ºä¾‹ä»£ç 
1. `examples/01_basic_fractal/` - åˆ†å‹å…¥é—¨
2. `examples/06_bsp_type1/` - ä¹°å–ç‚¹å®æˆ˜
3. `examples/10_multi_level/` - å¤šçº§åˆ«è”ç«‹

---

## ğŸš€ åä¸‰ã€å¿«é€Ÿå¼€å§‹

### å®‰è£…è°ƒè¯•ç‰ˆ (å¼€å‘ä¸­)
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/weisenchen/chanlun-system.git
cd chanlun-system

# ä¸€é”®å®‰è£…
./scripts/install.sh

# è¿è¡Œç¤ºä¾‹ 1
python launcher.py examples/01_basic_fractal/main.py

# åˆ†æè‚¡ç¥¨
python launcher.py analyze 000001.SZ --level 30m

# å¯åŠ¨æœåŠ¡
python launcher.py server --port 8000
```

### Docker éƒ¨ç½² (ç›®æ ‡)
```bash
# å¼€å‘ç¯å¢ƒ
docker-compose up

# ç”Ÿäº§ç¯å¢ƒ
docker-compose -f docker-compose.prod.yml up -d
```

---

## ğŸ“ åå››ã€æ²Ÿé€šä¸åä½œ

### å¼€å‘èŠ‚å¥
- **æ¯æ—¥:** ä»£ç æäº¤ + è¿›åº¦æ›´æ–°
- **æ¯å‘¨:** å‘¨ä¼š + æ¼”ç¤º (æ¯å‘¨äº”)
- **æ¯ä¸¤å‘¨:** Phase äº¤ä»˜ + å›é¡¾

### æ²Ÿé€šæ¸ é“
- **GitHub Issues:** Bug æŠ¥å‘Š + åŠŸèƒ½è¯·æ±‚
- **Discord/å¾®ä¿¡ç¾¤:** æ—¥å¸¸è®¨è®º
- **å‘¨æŠ¥é‚®ä»¶:** è¿›åº¦åŒæ­¥

---

## âœ… åäº”ã€æˆåŠŸæ ‡å‡†

### æŠ€æœ¯æ ‡å‡†
- âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½é€šè¿‡æµ‹è¯•
- âœ… æ€§èƒ½æŒ‡æ ‡è¾¾æˆ (è§ç¬¬ä¸ƒèŠ‚)
- âœ… æµ‹è¯•è¦†ç›–ç‡ >80%
- âœ… Docker é•œåƒ <500MB

### ç”¨æˆ·ä½“éªŒæ ‡å‡†
- âœ… å®‰è£…æ—¶é—´ <5 åˆ†é’Ÿ
- âœ… å¯åŠ¨æ—¶é—´ <5 ç§’
- âœ… 10 ä¸ªç¤ºä¾‹å…¨éƒ¨å¯è¿è¡Œ
- âœ… æ–‡æ¡£å®Œæ•´æ˜“æ‡‚

### ä¸šåŠ¡æ ‡å‡†
- âœ… èƒ½å‡†ç¡®è¯†åˆ«ä¸‰ç±»ä¹°å–ç‚¹
- âœ… åŒºé—´å¥—å®šä½ç²¾ç¡®åˆ° 1 åˆ†é’Ÿ
- âœ… æ”¯æŒ A è‚¡å…¨å¸‚åœº
- âœ… å®ç›˜æ¨¡æ‹Ÿæµ‹è¯•é€šè¿‡

---

## ğŸ¯ æ€»ç»“

æœ¬å¼€å‘è®¡åˆ’åŸºäºç¼ ä¸­è¯´ç¦… 1-108 è¯¾å®Œæ•´ç†è®ºï¼Œå‚è€ƒ ChanLun Invester v2.0 æ¶æ„è®¾è®¡ï¼Œé‡‡ç”¨ Rust + Python æ··åˆæ¶æ„ï¼Œç›®æ ‡åœ¨**10 å‘¨**å†…å®Œæˆä¸€ä¸ª**ç®€æ´ã€ä¸“ä¸šã€æ˜“ç”¨**çš„ç¼ è®ºæ™ºèƒ½åˆ†æç³»ç»Ÿã€‚

**æ ¸å¿ƒä¼˜åŠ¿:**
1. ğŸ¦€ **Rust é«˜æ€§èƒ½** - æ ¸å¿ƒè®¡ç®—æ•ˆç‡ä¿è¯
2. ğŸ **Python çµæ´»æ€§** - ç­–ç•¥å¿«é€Ÿè¿­ä»£
3. ğŸ”„ **è‡ªåŠ¨æ•…éšœåˆ‡æ¢** - ç³»ç»Ÿå¯é æ€§
4. ğŸ¯ **ç²¾ç¡®ä¹°å–ç‚¹** - ä¸‰ç±»ä¹°å–ç‚¹ + åŒºé—´å¥—
5. ğŸ“š **10 ä¸ªæ¸è¿›ç¤ºä¾‹** - 1-2 å¤©ä¸Šæ‰‹
6. ğŸ³ **Docker ä¸€é”®éƒ¨ç½²** - <500MB é•œåƒ

**æœ€ç»ˆæ„¿æ™¯:**
> **æˆä¸ºç¼ è®ºé¢†åŸŸçš„äº‹å®æ ‡å‡† â€”â€” ç®€æ´ã€ä¸“ä¸šã€æ˜“ç”¨ã€‚**

---

**æ–‡æ¡£ç‰ˆæœ¬:** v1.0  
**åˆ›å»ºæ—¶é—´:** 2026-02-28  
**ä¸‹æ¬¡æ›´æ–°:** 2026-03-07 (Week 1 å›é¡¾)
